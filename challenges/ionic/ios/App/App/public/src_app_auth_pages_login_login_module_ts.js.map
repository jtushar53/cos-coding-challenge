{"version":3,"file":"src_app_auth_pages_login_login_module_ts.js","mappings":"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","sources":["./node_modules/rxjs/_esm2015/internal/observable/timer.js","./src/app/auth/pages/login/login-routing.module.ts","./src/app/auth/pages/login/login.module.ts","./src/app/auth/pages/login/login.page.ts","./src/app/auth/pages/login/login.page.html"],"sourcesContent":["import { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer(dueTime = 0, periodOrScheduler, scheduler) {\n    let period = -1;\n    if (isNumeric(periodOrScheduler)) {\n        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n    }\n    else if (isScheduler(periodOrScheduler)) {\n        scheduler = periodOrScheduler;\n    }\n    if (!isScheduler(scheduler)) {\n        scheduler = async;\n    }\n    return new Observable(subscriber => {\n        const due = isNumeric(dueTime)\n            ? dueTime\n            : (+dueTime - scheduler.now());\n        return scheduler.schedule(dispatch, due, {\n            index: 0, period, subscriber\n        });\n    });\n}\nfunction dispatch(state) {\n    const { index, period, subscriber } = state;\n    subscriber.next(index);\n    if (subscriber.closed) {\n        return;\n    }\n    else if (period === -1) {\n        return subscriber.complete();\n    }\n    state.index = index + 1;\n    this.schedule(state, period);\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\nimport { IonicStorageModule } from '@ionic/storage-angular';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule,\n    IonicStorageModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { Observable, of, throwError, timer } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\nimport { AuthService } from '../../auth.service';\n\n//TODO: Below line need to be moved to a constant file, regex taken from http://emailregex.com/\n// eslint-disable-next-line max-len\nconst EMAIL_REGEX = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  loginForm: FormGroup;\n  constructor(private fb: FormBuilder, private router: Router, private auth: AuthService, private alertController: AlertController) { }\n\n  ngOnInit() {\n    this.loginForm = this.fb.group({\n      email: ['', [Validators.required, Validators.pattern(EMAIL_REGEX)],[this.checkEmailRegistered.bind(this)] ],\n      password: ['', [Validators.required]],\n    });\n  }\n\n  async login() {\n    try {\n      if(this.loginForm.valid){\n        this.auth.signIn({\n          email: this.loginForm.value.email,\n          password: this.loginForm.value.password,\n          meta: 'mobileapp'\n        }).subscribe(async response => {\n          await this.router.navigate(['home']);\n        }, async error => {\n          const alert = await this.alertController.create({\n            header: 'Login Failed',\n            subHeader: error.message,\n            buttons: ['OK']\n          });\n          await alert.present();\n        })\n        \n      }\n    } catch (error) {\n        console.log('error signing in', error);\n    }\n  }\n\n  checkEmailRegistered(\n    control: AbstractControl\n  ): Observable<{ [key: string]: any } | null> {\n    if (control.value === null || control.value.length === 0) {\n      return of(null);\n    } else {\n      return timer(1000).pipe(\n        switchMap(() => this.auth.emailRegistered(control.value)),\n      );\n    }\n  }\n}\n","export default \"<ion-content fullscreen=\\\"true\\\" class=\\\"ion-padding\\\">\\n\\n\\n\\n<form [formGroup]=\\\"loginForm\\\">\\n  <ion-list  color=\\\"secondary\\\">\\n    <ion-item fill=\\\"outline\\\" class=\\\"ion-margin-bottom\\\">\\n      <ion-label position=\\\"floating\\\">Enter Email</ion-label>\\n      <ion-input type=\\\"Email\\\"  formControlName=\\\"email\\\" autocomplete=\\\"off\\\"></ion-input>\\n      <ion-note color=\\\"danger\\\" slot=\\\"error\\\"  *ngIf=\\\"loginForm.controls['email'].errors?.pattern\\\">Valid email is required</ion-note>\\n      <ion-note color=\\\"danger\\\" slot=\\\"error\\\" *ngIf=\\\"loginForm.controls['email'].errors?.registered === false\\\">Email not registered</ion-note>\\n      <ion-icon slot=\\\"end\\\" name=\\\"checkmark-sharp\\\" color=\\\"success\\\" *ngIf=\\\"loginForm.controls['email'].touched && loginForm.controls['email'].valid\\\"></ion-icon>\\n      <ion-icon slot=\\\"end\\\" name=\\\"close-sharp\\\" color=\\\"danger\\\" *ngIf=\\\"loginForm.controls['email'].touched && loginForm.controls['email'].invalid\\\"></ion-icon>\\n    </ion-item>\\n    <ion-item fill=\\\"outline\\\">\\n      <ion-label position=\\\"floating\\\" >Enter Password</ion-label>\\n      <ion-input type=\\\"password\\\" formControlName=\\\"password\\\"  autocomplete=\\\"off\\\"></ion-input>\\n      <ion-note color=\\\"danger\\\" slot=\\\"error\\\">Valid password is required</ion-note>\\n    </ion-item>\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\n      <ion-button size=\\\"large\\\" (click)=\\\"login()\\\"> Login</ion-button>\\n    </ion-row>\\n  </ion-list>\\n</form>\\n\\n</ion-content>\";"],"names":[],"sourceRoot":"webpack:///"}